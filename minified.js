const inputField=document.getElementById("field"),isReadOnly=inputField.readOnly,buttonOne=document.getElementById("1"),buttonTwo=document.getElementById("2"),buttonThree=document.getElementById("3"),buttonFour=document.getElementById("4"),buttonFive=document.getElementById("5"),buttonSix=document.getElementById("6"),buttonSeven=document.getElementById("7"),buttonEight=document.getElementById("8"),buttonNine=document.getElementById("9"),buttonZero=document.getElementById("0"),buttonPlus=document.getElementById("+"),buttonMinus=document.getElementById("-"),buttonMultiply=document.getElementById("*"),buttonDivide=document.getElementById("/"),buttonEqual=document.getElementById("="),buttonCancelLast=document.getElementById("del"),buttonCancelAll=document.getElementById("AC"),buttonOpenParenthesis=document.getElementById("openParenthesis"),buttonClosedParenthesis=document.getElementById("closedParenthesis"),buttonDecimalPoint=document.getElementById("decimalPoint"),buttonRaiseToSecond=document.getElementById("raise"),buttonRaiseToY=document.getElementById("raiseToY");let result=0,expression="";function SafetyCheck(){if(!isReadOnly)throw alert("CLOSE THIS TAB NOW - SECURITY COMPROMISED"),new Error("Execution halted due to security condition.")}function stopInput(e){switch(e){case"+":case"*":case"/":case".":case"^2":case"^":return!0;default:return!1}}function calculator(e){if("del"==e)return expression=expression.substring(0,expression.length-1),void(document.getElementById("field").value=`${expression}`);stopInput(e)&&stopInput(expression.charAt(expression.length-1))||"-"==e&&"."==expression.charAt(expression.length-1)||(expression+=e,document.getElementById("field").value=`${expression}`)}function calculateResult(){if(!inputField.readOnly)throw alert("CLOSE THIS TAB NOW - SECURITY COMPROMISED"),new Error("Readonly attribute has been bypassed.");try{result=math.evaluate(expression),document.getElementById("field").value=result,expression=String(result)}catch(e){document.getElementById("field").value="Error",expression="",console.error("Calculation error:",e)}}function deleteAll(){expression="",result=0,document.getElementById("field").value=`${expression}`}SafetyCheck(),buttonOne.addEventListener("click",(function(){calculator("1")})),buttonTwo.addEventListener("click",(function(){calculator("2")})),buttonThree.addEventListener("click",(function(){calculator("3")})),buttonFour.addEventListener("click",(function(){calculator("4")})),buttonFive.addEventListener("click",(function(){calculator("5")})),buttonSix.addEventListener("click",(function(){calculator("6")})),buttonSeven.addEventListener("click",(function(){calculator("7")})),buttonEight.addEventListener("click",(function(){calculator("8")})),buttonNine.addEventListener("click",(function(){calculator("9")})),buttonZero.addEventListener("click",(function(){calculator("0")})),buttonPlus.addEventListener("click",(function(){calculator("+")})),buttonMinus.addEventListener("click",(function(){calculator("-")})),buttonMultiply.addEventListener("click",(function(){calculator("*")})),buttonDivide.addEventListener("click",(function(){calculator("/")})),buttonEqual.addEventListener("click",(function(){calculateResult()})),buttonCancelAll.addEventListener("click",(function(){deleteAll()})),buttonCancelLast.addEventListener("click",(function(){calculator("del")})),buttonOpenParenthesis.addEventListener("click",(function(){calculator("(")})),buttonClosedParenthesis.addEventListener("click",(function(){calculator(")")})),buttonDecimalPoint.addEventListener("click",(function(){calculator(".")})),buttonRaiseToSecond.addEventListener("click",(function(){calculator("^2")})),buttonRaiseToY.addEventListener("click",(function(){calculator("^")}));
